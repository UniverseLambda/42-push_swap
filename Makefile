.DEFAULT: all
.PHONY: all clean fclean re
.SUFFIXES: .c .o

NAME := push_swap

CC ?= clang
RM ?= rm
LD := $(CC)

CFLAGS ?=
CFLAGS := $(CFLAGS) -Wall -Wextra -Werror -Iinc -Ilibft/inc -g3 -fsanitize=address
LDFLAGS := $(LDFLAGS) -g3 -fsanitize=address

BUILD_TYPE := release

OBJS := src/main.o \
		src/new_median.o \
		src/new_median_ext.o \
		src/array.o \
		src/array_ext.o \
		src/lifo_stack.o \
		src/lifo_stack_op.o \
		src/ps_runtime.o \
		src/sort.o \
		src/ops_push_swap.o \
		src/ops_rotate.o \
		src/ops_rrotate.o \
		src/ops_target.o \
		src/quick_sort.o \
		src/chunk_sort.o \

all: all-dependency $(NAME)

$(NAME): dependency $(OBJS)
	$(LD) $(LDFLAGS) -o $(NAME) $(OBJS) libft/libft.a

%.o: %.c libft.h
	$(CC) $(CFLAGS) -o $@ -c $<

clean: clean-dependency
	$(RM) -f $(OBJS)

fclean: fclean-dependency clean
	$(RM) -f $(NAME)

re: fclean all

debug:	BUILD_TYPE := debug
debug:	all

run:	all
	./$(NAME) '-89' '44' '136' '-188' '-136' '196' '-82' '-85' '-155' '141' '16' '138' '96' '-132' '-86' '194' '133' '-20' '27' '-7' '122' '-156' '-165' '36' '52' '118' '-112' '-146' '7' '-52' '-119' '-104' '126' '-55' '-91' '89' '-76' '-111' '34' '73' '95' '-22' '166' '21' '53' '58' '170' '-4' '-194' '-51' '147' '-36' '-46' '128' '35' '65' '157' '-97' '5' '30' '179' '85' '-47' '-68' '-142' '-98' '-179' '-159' '-160' '-149' '-34' '-115' '84' '143' '-103' '-31' '-43' '66' '190' '114' '146' '-62' '-166' '-73' '-23' '159' '-72' '-54' '131' '177' '-199' '181' '64' '60' '161' '165' '-126' '-93' '104' '-61' '40' '140' '148' '154' '-60' '25' '113' '142' '-75' '-158' '-33' '-121' '-11' '-198' '-178' '50' '82' '-138' '-6' '-15' '-10' '-128' '182' '-56' '-109' '-181' '41' '38' '-88' '11' '139' '108' '57' '-147' '-70' '-141' '-13' '-1' '-9' '-99' '-139' '-64' '-153' '61' '-28' '152' '83' '175' '176' '-65' '144' '-195' '-127' '-151' '-17' '150' '-94' '31' '164' '-174' '-143' '-164' '-197' '-5' '-183' '81' '125' '-189' '12' '-40' '-120' '-116' '-81' '-87' '193' '-161' '168' '42' '-190' '-78' '98' '-30' '-175' '37' '-67' '101' '-184' '-135' '69' '6' '172' '74' '-137' '80' '-41' '67' '92' '-57' '62' '1' '-130' '189' '78' '162' '-12' '0' '75' '88' '129' '-140' '86' '-90' '-24' '51' '-27' '4' '79' '134' '186' '39' '49' '13' '59' '187' '137' '-39' '97' '185' '93' '110' '-154' '-50' '145' '-96' '15' '-83' '-163' '33' '-192' '111' '112' '-18' '-106' '77' '56' '47' '-84' '-170' '-193' '-169' '153' '124' '-144' '23' '-74' '-45' '-168' '-113' '-32' '-79' '18' '-134' '14' '-71' '-152' '-129' '160' '-108' '-114' '-2' '70' '-58' '76' '-66' '155' '-191' '-123' '99' '-8' '156' '173' '8' '-105' '-148' '45' '-59' '135' '54' '68' '72' '171' '-100' '90' '19' '3' '-80' '-107' '-196' '117' '20' '184' '-172' '-26' '-200' '-19' '116' '115' '-44' '-37' '-21' '43' '180' '-95' '119' '26' '200' '10' '120' '100' '32' '-133' '-48' '-53' '107' '197' '87' '-177' '-162' '-122' '-35' '149' '169' '192' '130' '-180' '17' '94' '102' '-77' '46' '-145' '183' '28' '-182' '127' '71' '-25' '-102' '-124' '-150' '103' '174' '-63' '91' '191' '132' '-167' '-38' '-186' '-3' '48' '105' '-171' '106' '-157' '-131' '-117' '24' '188' '-16' '2' '22' '-118' '-110' '151' '29' '163' '-29' '109' '-14' '55' '158' '-101' '-42' '-69' '-92' '121' '195' '9' '-125' '-187' '-49' '167' '178' '199' '-173' '63' '198' '-176' '123' '-185'

# DEPENDENCIES TARGET

dependency: all-dependency

all-dependency:
	make -C libft/ all

clean-dependency:
	make -C libft/ clean

fclean-dependency:
	make -C libft/ fclean

re-dependency:
	make -C libft/ re
